{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","services/PersonsService.js","components/Notification.js","App.js","index.js"],"names":["Filter","searchInput","handleFilterChange","value","onChange","Persons","personsFiltered","handleDelete","map","person","index","name","number","onClick","PersonForm","addPerson","newName","newNumber","handleNoteChange","handleNumberChange","onSubmit","type","baseUrl","personsService","getPerson","axios","get","then","response","data","updatePerson","id","newPerson","put","createPerson","post","deletePerson","delete","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchInput","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personService","initialPersons","concat","filter","toLowerCase","includes","e","target","preventDefault","isInclude","window","confirm","getPersonByName","length","setTimeout","catch","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.abffdce3.chunk.js","sourcesContent":["\nconst Filter = ({searchInput, handleFilterChange}) => {\n    return (\n        <>\n            filter shown with <input value={searchInput} onChange={handleFilterChange}/>\n        </>\n    )\n}\n\nexport default Filter;","\nconst Persons = ({personsFiltered, handleDelete}) => {\n\n\n    return (\n        <ul>\n            {\n            personsFiltered ?\n            personsFiltered.map((person, index) => {\n                    if (person.name && person.number) {\n                        return (\n                            <li key={person.name}>{person.name} {person.number} <button onClick={() => handleDelete(person)}>delete</button> </li>\n\n                        )\n                    }\n                }\n            ) : <li>No data</li>\n            }\n      </ul>\n    )\n}\n\nexport default Persons;","\nconst PersonForm = ({addPerson, newName, newNumber ,handleNoteChange, handleNumberChange}) => {\n    return (\n        <form onSubmit={addPerson}>\n        <div>\n          <h3>add a new</h3>\n          name: <input value={newName} onChange={handleNoteChange}/> <br/>\n          number: <input value={newNumber} onChange={handleNumberChange}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    )\n}\n\nexport default PersonForm;","import axios from \"axios\";\nconst baseUrl = '/api/persons';\n\nconst getPerson = () => {\n\tconst request = axios.get(baseUrl);\n\treturn request.then(response => response.data)\n}\n\nconst createPerson = (person) => {\n\tconst request = axios.post(baseUrl, person)\n\treturn request.then(response => response.data)\n}\n\nconst updatePerson = (id, newPerson) => {\n\tif (id && newPerson){\n\t\tconst request = axios.put(`${baseUrl}/${id}`, newPerson)\n\t\treturn request.then(response => response.data)\n\t}\n}\n\nconst deletePerson = (id) => {\n\tconst request = axios.delete(`${baseUrl}/${id}`);\n\treturn request\n\t\t.then(response => response.data)\n}\n\nconst personsService = { getPerson, updatePerson, createPerson, deletePerson }\n\nexport default personsService","const Notification = ({type, message}) => {\n  if (message === ''){\n      return '';\n  }\n  return (\n      <div className={type}>\n          {message}\n      </div>\n  )\n}\n\nexport default Notification","import { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Filter from \"./components/Filter\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport personService from \"./services/PersonsService\";\nimport personsService from \"./services/PersonsService\";\nimport Notification from \"./components/Notification\";\n\nfunction App() {\n  const [persons, setPersons] = useState([{ name: \"\", number: \"\", id: null }]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  useEffect(() => {\n    function fetchPersons() {\n      return personService.getPerson().then((initialPersons) => {\n        setPersons(persons.concat(initialPersons));\n      });\n    }\n\n    fetchPersons();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleNoteChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleFilterChange = (e) => {\n    setSearchInput(e.target.value);\n  };\n\n  const handleDelete = (e) => {\n    if (window.confirm(`would you like to delete ${e.name}`)) {\n      personsService.deletePerson(e.id).catch((error) => {\n        setErrorMessage(`Person ${e.name} was deleted from server`);\n        setTimeout(() => {\n          setErrorMessage(\"\");\n        }, 2000);\n      });\n      setPersons(persons.filter((person) => person.id !== e.id));\n    }\n  };\n\n  const personsFiltered = searchInput\n    ? persons.filter((person) =>\n        person.name.toLowerCase().includes(searchInput.toLowerCase())\n      )\n    : persons;\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    const isInclude = persons.map((person) => person.name).includes(newName);\n    const newPerson = { \n      name: newName, \n      number: newNumber \n    };\n\n    if (!isInclude) {\n      personsService\n        .createPerson(newPerson)\n        .then((person) => {\n          setPersons(persons.concat(person));\n          setNewName('');\n          setNewNumber('');\n          setSuccessMessage(`Added ${person.name}`);\n          setTimeout(() => setSuccessMessage(``), 2000);\n        })\n        .catch((error) => {\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(\"\");\n          }, 2000);\n        });\n    } else {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the phone number with a new one`\n        )\n      ) {\n        const getPersonByName = persons.filter(\n          (person) => person.name.toLowerCase() === newName.toLowerCase()\n        );\n        if (getPersonByName.length === 1) {\n          const { name, id } = getPersonByName[0];\n          personsService\n            .updatePerson(id, newPerson)\n            .then((response) => {\n              setPersons(\n                persons.map((person) => (person.id !== id ? person : response))\n              );\n              setSuccessMessage(`Added ${name}`);\n              setNewName('');\n              setNewNumber('');\n              setTimeout(() => setSuccessMessage(``), 2000);\n            })\n            .catch((error) => {\n              setErrorMessage(error.response.data.error);\n              setTimeout(() => {\n                setErrorMessage(\"\");\n              }, 2000);\n            });\n        }\n      }\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification type=\"success\" message={successMessage} />\n      <Notification type=\"error\" message={errorMessage} />\n      <Filter\n        searchInput={searchInput}\n        handleFilterChange={handleFilterChange}\n      />\n      <PersonForm\n        newName={newName}\n        newNumber={newNumber}\n        addPerson={addPerson}\n        handleNoteChange={handleNoteChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        personsFiltered={personsFiltered}\n        setPersons={setPersons}\n        handleDelete={handleDelete}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}